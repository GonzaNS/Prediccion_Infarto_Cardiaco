<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <title>Evaluación Predictiva de Infarto Cardíaco</title>

</head>

<body>

    <div class="contenido-principal">

        <form method="POST" action="/predict">
            <h1>Evaluación Predictiva de Infarto Cardíaco</h1>

            <div class="fila-formulario">
                <div class="columna-izquierda">
                    <!-- Género -->
                    <div class="pregunta-binaria">
                        <p class="texto-pregunta">¿Cuál es su género?</p>
                        <table class="tabla-opciones">
                            <tr>
                                <td>
                                    <input type="radio" id="genero-femenino" name="Genero" value="0" required>
                                    <label for="genero-femenino" class="opcion-radio">Femenino</label>
                                </td>
                                <td>
                                    <input type="radio" id="genero-masculino" name="Genero" value="1">
                                    <label for="genero-masculino" class="opcion-radio">Masculino</label>
                                </td>
                            </tr>
                        </table>
                    </div>

                    <!-- Presión Arterial Media (ahora binaria) -->
                    <div class="pregunta-binaria">
                        <p class="texto-pregunta">¿Revisó su presión arterial?</p>
                        <table class="tabla-opciones">
                            <tr>
                                <td>
                                    <input type="radio" id="pam-no" name="PAM" value="0" required>
                                    <label for="pam-no" class="opcion-radio">No</label>
                                </td>
                                <td>
                                    <input type="radio" id="pam-si" name="PAM" value="1">
                                    <label for="pam-si" class="opcion-radio">Sí</label>
                                </td>
                            </tr>
                        </table>
                    </div>

                </div>
                <div class="columna-derecha">

                    <!-- Edad -->
                    <div class="input-container">
                        <label for="Edad">Edad</label>
                        <input type="number" id="Edad" name="Edad" min="1" placeholder="Edad en años(32-70)" required>
                    </div>

                    <!-- Educación -->
                    <div class="input-container">
                        <label for="Educacion">Educación</label>
                        <select id="Educacion" name="Educacion" required>
                            <option value="" disabled selected>¿Nivel de educación alcanzado?
                            </option>
                            <option value="0">Sin Educación</option>
                            <option value="1">Educación primaria</option>
                            <option value="2">Educación universitaria</option>
                            <option value="3">Estudios de posgrado</option>
                        </select>
                    </div>
                </div>
            </div>


            <div class="fila-formulario">
                <div class="columna-izquierda">
                    <!-- Fumador actual -->
                    <div class="pregunta-binaria">
                        <p class="texto-pregunta">¿Actualmente es fumador?</p>
                        <table class="tabla-opciones">
                            <tr>
                                <td>
                                    <input type="radio" id="fumador-no" name="Fumador_actual" value="0" required />
                                    <label for="fumador-no" class="opcion-radio">No</label>
                                </td>
                                <td>
                                    <input type="radio" id="fumador-si" name="Fumador_actual" value="1" />
                                    <label for="fumador-si" class="opcion-radio">Sí</label>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
                <div class="columna-derecha">
                    <!-- Cigarros por día -->
                    <div class="input-container">
                        <label for="Cigarros_por_dia">Cantidad de Cigarros</label>
                        <input type="number" step="any" id="Cigarros_por_dia" name="Cigarros_por_dia" min="1"
                            placeholder="Cigarros al día (0 - 20)" required>
                    </div>
                </div>
            </div>


            <div class="seccion-binarias-restantes">
                <!-- ACV -->
                <div class="pregunta-binaria">
                    <p class="texto-pregunta">¿Ha tenido un ACV?</p>
                    <table class="tabla-opciones">
                        <tr>
                            <td>
                                <input type="radio" id="acv-no" name="ACV_prevalente" value="0" required>
                                <label for="acv-no" class="opcion-radio">No</label>
                            </td>
                            <td>
                                <input type="radio" id="acv-si" name="ACV_prevalente" value="1">
                                <label for="acv-si" class="opcion-radio">Sí</label>
                            </td>
                        </tr>
                    </table>
                </div>

                <!-- HTA -->
                <div class="pregunta-binaria">
                    <p class="texto-pregunta">¿Tiene hipertensión?</p>
                    <table class="tabla-opciones">
                        <tr>
                            <td>
                                <input type="radio" id="hta-no" name="HTA_prevalente" value="0" required>
                                <label for="hta-no" class="opcion-radio">No</label>
                            </td>
                            <td>
                                <input type="radio" id="hta-si" name="HTA_prevalente" value="1">
                                <label for="hta-si" class="opcion-radio">Sí</label>
                            </td>
                        </tr>
                    </table>
                </div>

                <!-- Diabetes -->
                <div class="pregunta-binaria">
                    <p class="texto-pregunta">¿Tiene diabetes?</p>
                    <table class="tabla-opciones">
                        <tr>
                            <td>
                                <input type="radio" id="diabetes-no" name="Diabetes" value="0" required>
                                <label for="diabetes-no" class="opcion-radio">No</label>
                            </td>
                            <td>
                                <input type="radio" id="diabetes-si" name="Diabetes" value="1">
                                <label for="diabetes-si" class="opcion-radio">Sí</label>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>

            <!-- SECCIÓN DE INPUTS NUMÉRICOS (2 COLUMNAS) -->
            <div class="seccion-inputs">
                <!-- Columna Izquierda (4 inputs) -->
                <div class="columna-inputs">

                    <div class="input-container">
                        <label for="Colesterol">Colesterol (mg/dL)</label>
                        <input type="number" id="Colesterol" name="Colesterol"
                            placeholder="Nivel de Colesterol (113-600)" required>
                    </div>

                    <div class="input-container">
                        <label for="PAS">Presión Sistólica (PAS)</label>
                        <input type="number" id="PAS" name="PAS" placeholder="Pre. Sis.(83.5-295)" required>
                    </div>

                    <div class="input-container">
                        <label for="IMC">Índice de Masa Corporal (IMC)</label>
                        <input type="number" step="0.1" id="IMC" name="IMC" placeholder="Ind. Mas. (15.5-56.8)"
                            required>
                    </div>
                </div>

                <!-- Columna Derecha (3 inputs) -->
                <div class="columna-inputs">
                    <div class="input-container">
                        <label for="PAD">Presión Diastólica (PAD)</label>
                        <input type="number" id="PAD" name="PAD" placeholder="Pre. Dia. (48-143)" required>
                    </div>

                    <div class="input-container">
                        <label for="FC">Frecuencia Cardíaca (FC)</label>
                        <input type="number" id="FC" name="FC" placeholder="Latidos por minuto (44-143)" required>
                    </div>

                    <div class="input-container">
                        <label for="Glucosa">Glucosa (mg/dL)</label>
                        <input type="number" id="Glucosa" name="Glucosa" placeholder="Niv. glucosa (40-394)" required>
                    </div>
                </div>
            </div>

            <button type="submit">Predecir</button>
        </form>

        <div>
            {% if prediccion is not none %}
            <div class="resultado-container">
                <h2>Resultado de la Predicción:</h2>
                <div class="resultado-card {{ 'positivo' if prediccion == 1 else 'negativo' }}">
                    <p><strong>Predicción:</strong>
                        {% if prediccion == 1 %}
                        <span class="positivo">Positivo para Enfermedad Cardiaca</span>
                        {% else %}
                        <span class="negativo">Negativo para Enfermedad Cardiaca</span>
                        {% endif %}
                    </p>
                    <p><strong>Probabilidad de tener enfermedad cardíaca:</strong> {{ prob_cardio }}%</p>
                </div>
            </div>
            {% endif %}
        </div>

    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const cigarrosInput = document.getElementById("Cigarros_por_dia");

            // Obtener ambos radio buttons
            const radioNo = document.getElementById("fumador-no");
            const radioSi = document.getElementById("fumador-si");

            // Función para manejar el cambio
            function manejarFumador() {
                if (radioNo.checked) {
                    cigarrosInput.value = 0;
                    cigarrosInput.readOnly = true;
                } else {
                    cigarrosInput.value = "";
                    cigarrosInput.readOnly = false;
                }
            }

            // Escuchar cambios en ambos radios
            radioNo.addEventListener("change", manejarFumador);
            radioSi.addEventListener("change", manejarFumador);

            // Ejecutar al cargar por si ya hay un valor seleccionado
            manejarFumador();
        });

    </script>


    </div>

</body>

</html>